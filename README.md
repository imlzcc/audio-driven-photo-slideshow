# Audio-Driven Photo Slideshow Generator

一个基于Python和PyQt6的音频驱动图片幻灯片生成器，可以将图片文件夹和音频文件合成为动态视频。

## 功能特性

### 🎵 音频处理
- **单个处理模式**：处理单个音频文件
- **批量处理模式**：一次性处理整个音频文件夹中的所有音频文件
- **智能文件命名**：自动使用音频文件名作为输出视频文件名
- **文件冲突处理**：自动处理重名文件，避免覆盖

### 🖼️ 图片处理
- **多格式支持**：支持 jpg, jpeg, png, bmp, gif, tiff, webp 等格式
- **智能时长**：每张图片的播放时长可在指定范围内随机
- **已处理图片管理**：自动将处理过的图片移动到指定文件夹

### 🎬 动画效果
- **多种动画**：支持缩放、平移等多种动画效果
- **随机效果**：可选择随机动画效果
- **强度控制**：可调节动画强度（0.1x - 3.0x）
- **自定义分辨率**：支持多种预设分辨率和自定义分辨率

### ⚙️ 高级设置
- **编码优化**：支持多种FFmpeg编码预设
- **性能调优**：可调节FPS、CRF、线程数等参数
- **配置持久化**：所有设置自动保存，无需重复配置

## 安装要求

### 系统要求
- Python 3.8+
- Windows 10/11 (推荐)
- 至少 4GB RAM
- 足够的磁盘空间用于视频输出

### 依赖包
```bash
pip install -r requirements.txt
```

主要依赖：
- PyQt6 - GUI框架
- moviepy - 视频处理
- pillow - 图片处理
- numpy - 数值计算

## 使用方法

### 1. 启动应用
```bash
python main.py
```

### 2. 选择输入
- **图片文件夹**：选择包含图片的文件夹
- **音频文件/文件夹**：
  - 单个处理：选择单个音频文件
  - 批量处理：选择包含多个音频文件的文件夹

### 3. 配置参数
- **图片时长**：设置每张图片的播放时长范围
- **动画效果**：选择动画类型和强度
- **分辨率**：选择输出视频的分辨率
- **性能设置**：调整编码参数以平衡质量和速度

### 4. 选择输出
- **输出文件夹**：选择视频保存位置
- **已处理图片文件夹**：选择处理过的图片存放位置

### 5. 开始生成
- 点击"生成视频"按钮开始处理
- 在日志面板查看处理进度
- 批量处理时会自动依次处理所有音频文件

## 配置说明

### 图片时长设置
- **最小时长**：每张图片最少播放时间（秒）
- **最大时长**：每张图片最多播放时间（秒）
- 系统会在范围内随机选择时长，增加视频的节奏感

### 动画效果
- **随机效果**：每张图片随机选择动画效果
- **Slow Zoom In/Out**：缓慢缩放效果
- **Pan系列**：各种方向的平移效果
- **强度调节**：0.1x（轻微）到 3.0x（强烈）

### 分辨率选项
- **1920x1080 (16:9)**：标准高清
- **1280x720 (16:9)**：标清
- **2560x1440 (16:9)**：2K
- **3840x2160 (16:9)**：4K
- **1080x1080 (1:1)**：正方形
- **1080x1920 (9:16)**：竖屏
- **Custom...**：自定义分辨率

### 性能设置
- **FPS**：视频帧率（12-60）
- **Preset**：编码预设（ultrafast到medium）
- **CRF**：视频质量（15-35，越小质量越好）
- **Threads**：编码线程数

## 文件结构

```
audioToVideo/
├── main.py                 # 主程序文件
├── animation_effects.py    # 动画效果实现
├── config_manager.py       # 配置管理
├── requirements.txt        # 依赖包列表
├── app_config.json        # 配置文件
├── .gitignore             # Git忽略文件
└── README.md              # 说明文档
```

## 使用技巧

### 批量处理建议
1. 将音频文件按类型或主题分类到不同文件夹
2. 使用相同的图片文件夹处理多个音频
3. 设置合适的输出文件夹结构

### 性能优化
1. **快速处理**：使用 ultrafast 预设
2. **高质量**：使用 medium 预设，降低 CRF 值
3. **多线程**：根据CPU核心数设置合适的线程数

### 文件管理
1. 定期清理已处理图片文件夹
2. 使用有意义的文件夹名称
3. 保持足够的磁盘空间

## 故障排除

### 常见问题
1. **内存不足**：减少线程数，降低分辨率
2. **处理缓慢**：使用 ultrafast 预设
3. **文件冲突**：检查输出文件夹权限
4. **音频格式不支持**：转换为 mp3 或 wav 格式

### 日志信息
- 查看日志面板了解详细处理过程
- 错误信息会显示在日志中
- 批量处理时会显示进度信息

## 更新日志

### v1.0.0
- 基础功能实现
- 单个和批量处理模式
- 多种动画效果
- 配置持久化
- 自动文件管理

## 许可证

本项目采用 MIT 许可证。

## 贡献

欢迎提交 Issue 和 Pull Request！

## 联系方式

如有问题或建议，请通过 GitHub Issues 联系。
